# dita-ot-markdown-html5-diagrams-plugin

DITA Open Toolkit plugin which allows publishing markdown Mermaid diagram blocks to HTML5.

https://mermaid-js.github.io

The plugin was tested and developed with DITA OT 4.3

If you set the markdown fenced codeblock language to mermaid:

1. the plugin will inject MermaidJS to html5 from CDN: `https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs`
2. the plugin will remove the nested `code` tags inside `pre` when converting markdown mermaid codeblocks to html5, otherwise mermaidjs will raise an error.
3. the plugin will override the default `language-mermaid` class with `mermaid`, saving you the effort to set `querySelector` in javascript with [mermaid.run](https://mermaid.js.org/config/usage.html#using-mermaid-run).

## Installation

The DITA OT plugin folder **com.drewzhao.md-html5-mermaidjs** can be manually downloaded, copied to a DITA Open Toolkit **plugins** folder and then installed using the **dita --install** command line.

## Usage

The plugin adds a new transtype `md-html5-mermaidjs`:

```shell
dita --input=/path/to/your.ditamap --format=md-html5-mermaidjs
```

## Security

The Mermaid-based diagram is generated by the Mermaid javascript from `https://cdn.jsdelivr.net/npm/mermaid@11/dist/mermaid.esm.min.mjs` in the HTML footer.

  
Copyright and License
---------------------
Copyright 2025

This project is licensed under [Apache License 2.0](https://github.com/oxygenxml/dita-ot-diagrams-plugin/blob/master/LICENSE).
